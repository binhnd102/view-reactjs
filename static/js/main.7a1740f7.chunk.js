(this.webpackJsonpview=this.webpackJsonpview||[]).push([[0],{125:function(e,a,t){e.exports=t(173)},173:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(10),s=t.n(o),l=t(108),i=t(38),m=t(9),c=t(16),u=t(11),d=t(29),h=t(28),p=t(222),g=t(206),f=t(204),E=t(219),b=t(209),v=t(208),N=t(64),C=t.n(N),y=t(53),x=t(27),w=t.n(x),S=t(202),k=t(207),P=t(100),T=t.n(P).a.create({baseURL:"https://us-central1-todoapp-df89c.cloudfunctions.net/api"}),j=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).handleChange=function(e){n.setState(Object(m.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),n.setState({loading:!0});var a={email:n.state.email,password:n.state.password};T.post("/login",a).then((function(e){localStorage.setItem("AuthToken","Bearer ".concat(e.data.token)),n.setState({loading:!1}),n.props.history.push("/")})).catch((function(e){n.setState({errors:e.response.data,loading:!1})}))},n.state={email:"",password:"",errors:[],loading:!1},n}return Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){var e=this.props.classes,a=this.state,t=a.errors,n=a.loading;return r.a.createElement(S.a,{component:"main",maxWidth:"xs"},r.a.createElement(f.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(p.a,{className:e.avatar},r.a.createElement(C.a,null)),r.a.createElement(y.a,{component:"h1",variant:"h5"},"Login"),r.a.createElement("form",{className:e.form,noValidate:!0},r.a.createElement(E.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,helperText:t.email,error:!!t.email,onChange:this.handleChange}),r.a.createElement(E.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",helperText:t.password,error:!!t.password,onChange:this.handleChange}),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:this.handleSubmit,disabled:n||!this.state.email||!this.state.password},"Sign In",n&&r.a.createElement(k.a,{size:30,className:e.progess})),r.a.createElement(v.a,{container:!0},r.a.createElement(v.a,{item:!0},r.a.createElement(b.a,{href:"signup",variant:"body2"},"Don't have an account? Sign Up"))),t.general&&r.a.createElement(y.a,{variant:"body2",className:e.customError},t.general))))}}]),t}(n.Component),O=w()((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},customError:{color:"red",fontSize:"0.8rem",marginTop:10},progess:{position:"absolute"}}}))(j),W=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).handleChange=function(e){n.setState(Object(m.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),n.setState({loading:!0});var a={firstName:n.state.firstName,lastName:n.state.lastName,phoneNumber:n.state.phoneNumber,country:n.state.country,username:n.state.username,email:n.state.email,password:n.state.password,confirmPassword:n.state.confirmPassword};T.post("/signup",a).then((function(e){localStorage.setItem("AuthToken","".concat(e.data.token)),n.setState({loading:!1}),n.props.history.push("/")})).catch((function(e){n.setState({errors:e.response.data,loading:!1})}))},n.state={firstName:"",lastName:"",phoneNumber:"",country:"",username:"",email:"",password:"",confirmPassword:"",errors:[],loading:!1},n}return Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){var e=this.props.classes,a=this.state,t=a.errors,n=a.loading;return r.a.createElement(S.a,{component:"main",maxWidth:"xs"},r.a.createElement(f.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(p.a,{className:e.avatar},r.a.createElement(C.a,null)),r.a.createElement(y.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:e.form,noValidate:!0},r.a.createElement(v.a,{container:!0,spacing:2},r.a.createElement(v.a,{item:!0,xs:12,sm:6},r.a.createElement(E.a,{variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",name:"firstName",autoComplete:"firstName",helperText:t.firstName,error:!!t.firstName,onChange:this.handleChange})),r.a.createElement(v.a,{item:!0,xs:12,sm:6},r.a.createElement(E.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lastName",helperText:t.lastName,error:!!t.lastName,onChange:this.handleChange})),r.a.createElement(v.a,{item:!0,xs:12,sm:6},r.a.createElement(E.a,{variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"User Name",name:"username",autoComplete:"username",helperText:t.username,error:!!t.username,onChange:this.handleChange})),r.a.createElement(v.a,{item:!0,xs:12,sm:6},r.a.createElement(E.a,{variant:"outlined",required:!0,fullWidth:!0,id:"phoneNumber",label:"Phone Number",name:"phoneNumber",autoComplete:"phoneNumber",pattern:"[7-9]{1}[0-9]{9}",helperText:t.phoneNumber,error:!!t.phoneNumber,onChange:this.handleChange})),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(E.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",helperText:t.email,error:!!t.email,onChange:this.handleChange})),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(E.a,{variant:"outlined",required:!0,fullWidth:!0,id:"country",label:"Country",name:"country",autoComplete:"country",helperText:t.country,error:!!t.country,onChange:this.handleChange})),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(E.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",helperText:t.password,error:!!t.password,onChange:this.handleChange})),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(E.a,{variant:"outlined",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm Password",type:"password",id:"confirmPassword",autoComplete:"current-password",onChange:this.handleChange}))),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:this.handleSubmit,disabled:n||!this.state.email||!this.state.password||!this.state.firstName||!this.state.lastName||!this.state.country||!this.state.username||!this.state.phoneNumber},"Sign Up",n&&r.a.createElement(k.a,{size:30,className:e.progess})),r.a.createElement(v.a,{container:!0,justify:"flex-end"},r.a.createElement(v.a,{item:!0},r.a.createElement(b.a,{href:"login",variant:"body2"},"Already have an account? Sign in"))))))}}]),t}(n.Component),I=w()((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},progess:{position:"absolute"}}}))(W),L=t(2),A=t(104),z=t.n(A),U=t(210),q=t(211),B=t(212),D=t(213),F=t(3),G=function(e){null===localStorage.getItem("AuthToken")&&e.push("/login")},H=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).componentWillMount=function(){G(n.props.history);var e=localStorage.getItem("AuthToken");T.defaults.headers.common={Authorization:"".concat(e)},T.get("/user").then((function(e){console.log(e.data),n.setState({firstName:e.data.userCredentials.firstName,lastName:e.data.userCredentials.lastName,email:e.data.userCredentials.email,phoneNumber:e.data.userCredentials.phoneNumber,country:e.data.userCredentials.country,username:e.data.userCredentials.username,uiLoading:!1})})).catch((function(e){403===e.response.status&&n.props.history.push("/login"),console.log(e),n.setState({errorMsg:"Error in retrieving the data"})}))},n.handleChange=function(e){n.setState(Object(m.a)({},e.target.name,e.target.value))},n.handleImageChange=function(e){n.setState({image:e.target.files[0]})},n.profilePictureHandler=function(e){e.preventDefault(),n.setState({uiLoading:!0}),G(n.props.history);var a=localStorage.getItem("AuthToken"),t=new FormData;t.append("image",n.state.image),t.append("content",n.state.content),T.defaults.headers.common={Authorization:"".concat(a)},T.post("/user/image",t,{headers:{"content-type":"multipart/form-data"}}).then((function(){window.location.reload()})).catch((function(e){403===e.response.status&&n.props.history.push("/login"),console.log(e),n.setState({uiLoading:!1,imageError:"Error in posting the data"})}))},n.updateFormValues=function(e){e.preventDefault(),n.setState({buttonLoading:!0}),G(n.props.history);var a=localStorage.getItem("AuthToken");T.defaults.headers.common={Authorization:"".concat(a)};var t={firstName:n.state.firstName,lastName:n.state.lastName,country:n.state.country};T.post("/user",t).then((function(){n.setState({buttonLoading:!1})})).catch((function(e){403===e.response.status&&n.props.history.push("/login"),console.log(e),n.setState({buttonLoading:!1})}))},n.state={firstName:"",lastName:"",email:"",phoneNumber:"",username:"",country:"",profilePicture:"",uiLoading:!0,buttonLoading:!1,imageError:""},n}return Object(u.a)(t,[{key:"render",value:function(){var e=this.props,a=e.classes,t=Object(L.a)(e,["classes"]);return!0===this.state.uiLoading?r.a.createElement("main",{className:a.content},r.a.createElement("div",{className:a.toolbar}),this.state.uiLoading&&r.a.createElement(k.a,{size:150,className:a.uiProgess})):r.a.createElement("main",{className:a.content},r.a.createElement("div",{className:a.toolbar}),r.a.createElement(U.a,Object.assign({},t,{className:Object(F.a)(a.root,a)}),r.a.createElement(q.a,null,r.a.createElement("div",{className:a.details},r.a.createElement("div",null,r.a.createElement(y.a,{className:a.locationText,gutterBottom:!0,variant:"h4"},this.state.firstName," ",this.state.lastName),r.a.createElement(g.a,{variant:"outlined",color:"primary",type:"submit",size:"small",startIcon:r.a.createElement(z.a,null),className:a.uploadButton,onClick:this.profilePictureHandler},"Upload Photo"),r.a.createElement("input",{type:"file",onChange:this.handleImageChange}),!!this.state.imageError&&r.a.createElement("div",{className:a.customError}," ","Wrong Image Format || Supported Format are PNG and JPG"))),r.a.createElement("div",{className:a.progress})),r.a.createElement(B.a,null)),r.a.createElement("br",null),r.a.createElement(U.a,Object.assign({},t,{className:Object(F.a)(a.root,a)}),r.a.createElement("form",{autoComplete:"off",noValidate:!0},r.a.createElement(B.a,null),r.a.createElement(q.a,null,r.a.createElement(v.a,{container:!0,spacing:3},r.a.createElement(v.a,{item:!0,md:6,xs:12},r.a.createElement(E.a,{fullWidth:!0,label:"First name",margin:"dense",name:"firstName",variant:"outlined",value:this.state.firstName,onChange:this.handleChange})),r.a.createElement(v.a,{item:!0,md:6,xs:12},r.a.createElement(E.a,{fullWidth:!0,label:"Last name",margin:"dense",name:"lastName",variant:"outlined",value:this.state.lastName,onChange:this.handleChange})),r.a.createElement(v.a,{item:!0,md:6,xs:12},r.a.createElement(E.a,{fullWidth:!0,label:"Email",margin:"dense",name:"email",variant:"outlined",disabled:!0,value:this.state.email,onChange:this.handleChange})),r.a.createElement(v.a,{item:!0,md:6,xs:12},r.a.createElement(E.a,{fullWidth:!0,label:"Phone Number",margin:"dense",name:"phone",type:"number",variant:"outlined",disabled:!0,value:this.state.phoneNumber,onChange:this.handleChange})),r.a.createElement(v.a,{item:!0,md:6,xs:12},r.a.createElement(E.a,{fullWidth:!0,label:"User Name",margin:"dense",name:"userHandle",disabled:!0,variant:"outlined",value:this.state.username,onChange:this.handleChange})),r.a.createElement(v.a,{item:!0,md:6,xs:12},r.a.createElement(E.a,{fullWidth:!0,label:"Country",margin:"dense",name:"country",variant:"outlined",value:this.state.country,onChange:this.handleChange})))),r.a.createElement(B.a,null),r.a.createElement(D.a,null))),r.a.createElement(g.a,{color:"primary",variant:"contained",type:"submit",className:a.submitButton,onClick:this.updateFormValues,disabled:this.state.buttonLoading||!this.state.firstName||!this.state.lastName||!this.state.country},"Save details",this.state.buttonLoading&&r.a.createElement(k.a,{size:30,className:a.progess})))}}]),t}(n.Component),M=w()((function(e){return{content:{flexGrow:1,padding:e.spacing(3)},toolbar:e.mixins.toolbar,root:{},details:{display:"flex"},avatar:{height:110,width:100,flexShrink:0,flexGrow:0},locationText:{paddingLeft:"15px"},buttonProperty:{position:"absolute",top:"50%"},uiProgess:{position:"fixed",zIndex:"1000",height:"31px",width:"31px",left:"50%",top:"35%"},progess:{position:"absolute"},uploadButton:{marginLeft:"8px",margin:e.spacing(1)},customError:{color:"red",fontSize:"0.8rem",marginTop:10},submitButton:{marginTop:"10px"}}}))(H),V=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("main",{className:e.content},r.a.createElement("div",{className:e.toolbar}),r.a.createElement(y.a,{paragraph:!0},"Hello I am todo"))}}]),t}(n.Component),J=w()((function(e){return{content:{flexGrow:1,padding:e.spacing(3)},toolbar:e.mixins.toolbar}}))(V),R=t(221),$=t(214),K=t(215),Q=t(205),X=t(216),Y=t(217),Z=t(218),_=t(106),ee=t.n(_),ae=t(105),te=t.n(ae),ne=t(107),re=t.n(ne),oe=function(e){Object(d.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).state={render:!1},n.loadAccountPage=function(e){n.setState({render:!0})},n.loadTodoPage=function(e){n.setState({render:!1})},n.logoutHandler=function(e){localStorage.removeItem("AuthToken"),n.props.history.push("/login")},n.componentWillMount=function(){G(n.props.history);var e=localStorage.getItem("AuthToken");T.defaults.headers.common={Authorization:"".concat(e)},T.get("/user").then((function(e){console.log(e.data),n.setState({firstName:e.data.userCredentials.firstName,lastName:e.data.userCredentials.lastName,email:e.data.userCredentials.email,phoneNumber:e.data.userCredentials.phoneNumber,country:e.data.userCredentials.country,username:e.data.userCredentials.username,uiLoading:!1,profilePicture:e.data.userCredentials.imageUrl})})).catch((function(e){403===e.response.status&&n.props.history.push("/login"),console.log(e),n.setState({errorMsg:"Error in retrieving the data"})}))},n.state={firstName:"",lastName:"",profilePicture:"",uiLoading:!0,imageLoading:!1},n}return Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return!0===this.state.uiLoading?r.a.createElement("div",{className:e.root},this.state.uiLoading&&r.a.createElement(k.a,{size:150,className:e.uiProgess})):r.a.createElement("div",{className:e.root},r.a.createElement(f.a,null),r.a.createElement($.a,{position:"fixed",className:e.appBar},r.a.createElement(K.a,null,r.a.createElement(y.a,{variant:"h6",noWrap:!0},"TodoApp"))),r.a.createElement(R.a,{className:e.drawer,variant:"permanent",classes:{paper:e.drawerPaper}},r.a.createElement("div",{className:e.toolbar}),r.a.createElement(B.a,null),r.a.createElement("center",null,r.a.createElement(p.a,{src:this.state.profilePicture,className:e.avatar}),r.a.createElement("p",null," ",this.state.firstName," ",this.state.lastName)),r.a.createElement(B.a,null),r.a.createElement(Q.a,null,r.a.createElement(X.a,{button:!0,key:"Todo",onClick:this.loadTodoPage},r.a.createElement(Y.a,null," ",r.a.createElement(te.a,null)," "),r.a.createElement(Z.a,{primary:"Todo"})),r.a.createElement(X.a,{button:!0,key:"Account",onClick:this.loadAccountPage},r.a.createElement(Y.a,null," ",r.a.createElement(ee.a,null)," "),r.a.createElement(Z.a,{primary:"Account"})),r.a.createElement(X.a,{button:!0,key:"Logout",onClick:this.logoutHandler},r.a.createElement(Y.a,null," ",r.a.createElement(re.a,null)," "),r.a.createElement(Z.a,{primary:"Logout"})))),r.a.createElement("div",null,this.state.render?r.a.createElement(M,null):r.a.createElement(J,null)))}}]),t}(n.Component),se=w()((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3)},avatar:{height:110,width:100,flexShrink:0,flexGrow:0,marginTop:20},uiProgess:{position:"fixed",zIndex:"1000",height:"31px",width:"31px",left:"50%",top:"35%"},toolbar:e.mixins.toolbar}}))(oe);var le=function(){return r.a.createElement(l.a,null,r.a.createElement("div",null,r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/login",component:O}),r.a.createElement(i.a,{exact:!0,path:"/signup",component:I}),r.a.createElement(i.a,{exact:!0,path:"/",component:se}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[125,1,2]]]);
//# sourceMappingURL=main.7a1740f7.chunk.js.map